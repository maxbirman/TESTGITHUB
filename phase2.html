<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <script src="https://maxbirman.github.io/TESTGITHUB/functions.js"></script>
		<script src="https://maxbirman.github.io/TESTGITHUB/aux_functions.js"></script>
		<script src="https://maxbirman.github.io/TESTGITHUB/variables.js"></script>
	    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
	    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>

	    <title>Generador de Comandos VPN</title>
    <title>Document</title>
</head>
<body>
    <div class="container p-3 col-9">
        <form id="vpnForm">			
            <div class="form-group">	   
                <div class="row border rounded p-3 mt-2 formDiv" id="phase2Proposal">
                    <div class="bg-black text-white">
                        <h3>Phase 2 Proposal</h3>		
                    </div>						
                    <div class="mb-1" id="subnets">	
                        <div class="row mt-3" id="subnets_0">	
                            <div class="col-3">
                                <label class="pt-2">Subnets</label>
                            </div>								
                            <div class="col-3 pe-0">
                                <input type="localSubnet" class="form-control subnet"  onblur="checkSubnet(this)" id="localSubnet" aria-describedby="nameHelp" placeholder="Local Subnet" required>
                            </div>
                            <div class="col-1 ps-0">
                                <select class="form-control" name="localMask" id="localMask" disabled>							
                                </select>
                            </div>								
                            <div class="col-3 pe-0">
                                <input type="remoteSubnet" class="form-control subnet" onblur="checkSubnet(this)"  id="remoteSubnet" aria-describedby="nameHelp" placeholder="Remote Subnet" required>
                            </div>
                            <div class="col-1 ps-0">
                                <select class="form-control" name="remoteMask" id="remoteMask" disabled>
                                </select>
                            </div>
                            <div class="col-1">
                                <div class="row">
                                    <div class="col-6" id="addButton_0">
                                        <a href="#" class="btn btn-primary" tabindex="-1" role="button" aria-disabled="true" id="addSubnets_0" disabled>+</a>
                                    </div>                                    
                                </div>                                
                            </div>	
                        </div>
                    </div>						
                    <div class="mb-1">	
                        <div class="row">	
                            <div class="col-3">
                                <label class="pt-2">Autenticaci&oacute;n / Encriptaci&oacute;n</label>
                            </div>
                            <div class="col-3">
                                <select class="form-control" id="phase2Proposal1" name="phase2Proposal1" required>
                                    <option value="DES-MD5" selected="selected">DES-MD5</option>
                                    <option value="DES-SHA1">DES-SHA1</option>
                                    <option value="DES-SHA256">DES-SHA256</option>
                                    <option value="DES-SHA384">DES-SHA384</option>
                                    <option value="DES-SHA512">DES-SHA512</option>
                                    <option value="3DES-MD5">3DES-MD5</option>
                                    <option value="3DES-SHA1">3DES-SHA1</option>
                                    <option value="3DES-SHA256">3DES-SHA256</option>
                                    <option value="3DES-SHA384">3DES-SHA384</option>
                                    <option value="3DES-SHA512">3DES-SHA512</option>
                                    <option value="AES128-MD5">AES128-MD5</option>
                                    <option value="AES128-SHA1">AES128-SHA1</option>
                                    <option value="AES128-SHA256">AES128-SHA256</option>
                                    <option value="AES128-SHA384">AES128-SHA384</option>
                                    <option value="AES128-SHA512">AES128-SHA512</option>
                                    <option value="AES192-MD5">AES192-MD5</option>
                                    <option value="AES192-SHA1">AES192-SHA1</option>
                                    <option value="AES192-SHA256">AES192-SHA256</option>
                                    <option value="AES192-SHA384">AES192-SHA384</option>
                                    <option value="AES192-SHA512">AES192-SHA512</option>
                                    <option value="AES256-MD5">AES256-MD5</option>
                                    <option value="AES256-SHA1">AES256-SHA1</option>
                                    <option value="AES256-SHA256">AES256-SHA256</option>
                                    <option value="AES256-SHA384">AES256-SHA384</option>
                                    <option value="AES256-SHA512">AES256-SHA512</option>
                                </select>
                            </div>
                            <div class="col-3">
                                <select class="form-control" id="phase2Proposal2" name="phase2Proposal2" required>
                                    <option value="DES-MD5">DES-MD5</option>
                                    <option value="DES-SHA1" selected="selected">DES-SHA1</option>
                                    <option value="DES-SHA256">DES-SHA256</option>
                                    <option value="DES-SHA384">DES-SHA384</option>
                                    <option value="DES-SHA512">DES-SHA512</option>
                                    <option value="3DES-MD5">3DES-MD5</option>
                                    <option value="3DES-SHA1">3DES-SHA1</option>
                                    <option value="3DES-SHA256">3DES-SHA256</option>
                                    <option value="3DES-SHA384">3DES-SHA384</option>
                                    <option value="3DES-SHA512">3DES-SHA512</option>
                                    <option value="AES128-MD5">AES128-MD5</option>
                                    <option value="AES128-SHA1">AES128-SHA1</option>
                                    <option value="AES128-SHA256">AES128-SHA256</option>
                                    <option value="AES128-SHA384">AES128-SHA384</option>
                                    <option value="AES128-SHA512">AES128-SHA512</option>
                                    <option value="AES192-MD5">AES192-MD5</option>
                                    <option value="AES192-SHA1">AES192-SHA1</option>
                                    <option value="AES192-SHA256">AES192-SHA256</option>
                                    <option value="AES192-SHA384">AES192-SHA384</option>
                                    <option value="AES192-SHA512">AES192-SHA512</option>
                                    <option value="AES256-MD5">AES256-MD5</option>
                                    <option value="AES256-SHA1">AES256-SHA1</option>
                                    <option value="AES256-SHA256">AES256-SHA256</option>
                                    <option value="AES256-SHA384">AES256-SHA384</option>
                                    <option value="AES256-SHA512">AES256-SHA512</option>
                                </select>
                            </div>
                            <div class="col-3">
                                <select class="form-control" id="phase2Proposal3" name="phase2Proposal3">
                                    <option value="none">Ninguno</option>
                                    <option value="DES-MD5">DES-MD5</option>
                                    <option value="DES-SHA1">DES-SHA1</option>
                                    <option value="DES-SHA256">DES-SHA256</option>
                                    <option value="DES-SHA384">DES-SHA384</option>
                                    <option value="DES-SHA512">DES-SHA512</option>
                                    <option value="3DES-MD5">3DES-MD5</option>
                                    <option value="3DES-SHA1">3DES-SHA1</option>
                                    <option value="3DES-SHA256">3DES-SHA256</option>
                                    <option value="3DES-SHA384">3DES-SHA384</option>
                                    <option value="3DES-SHA512">3DES-SHA512</option>
                                    <option value="AES128-MD5">AES128-MD5</option>
                                    <option value="AES128-SHA1">AES128-SHA1</option>
                                    <option value="AES128-SHA256">AES128-SHA256</option>
                                    <option value="AES128-SHA384">AES128-SHA384</option>
                                    <option value="AES128-SHA512">AES128-SHA512</option>
                                    <option value="AES192-MD5">AES192-MD5</option>
                                    <option value="AES192-SHA1">AES192-SHA1</option>
                                    <option value="AES192-SHA256">AES192-SHA256</option>
                                    <option value="AES192-SHA384">AES192-SHA384</option>
                                    <option value="AES192-SHA512">AES192-SHA512</option>
                                    <option value="AES256-MD5">AES256-MD5</option>
                                    <option value="AES256-SHA1">AES256-SHA1</option>
                                    <option value="AES256-SHA256">AES256-SHA256</option>
                                    <option value="AES256-SHA384">AES256-SHA384</option>
                                    <option value="AES256-SHA512">AES256-SHA512</option>
                                </select>
                            </div>					
                        </div>
                    </div>						
                    <div class="mb-1">	
                        <div class="row">	
                            <div class="col-3">
                                <label class="pt-2">Diffie Hellman Group</label>
                            </div>
                            <div class="col-3">
                                <select class="form-control" id="phase2DiffieHellman1" name="phase2DiffieHellman1" required>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="5">5</option>
                                    <option value="14" selected="selected">14</option>
                                    <option value="15">15</option>
                                    <option value="16">16</option>
                                    <option value="17">17</option>
                                    <option value="18">18</option>
                                    <option value="19">19</option>
                                    <option value="20">20</option>
                                    <option value="21">21</option>
                                    <option value="27">27</option>
                                    <option value="28">28</option>
                                    <option value="29">29</option>
                                    <option value="30">30</option>
                                    <option value="31">31</option>
                                    <option value="32">32</option>
                                </select>
                            </div>
                            <div class="col-3">
                                <select class="form-control" id="phase2DiffieHellman2" name="phase2DiffieHellman1" required>
                                    <option value="">Ninguno</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="5" selected="selected">5</option>
                                    <option value="14">14</option>
                                    <option value="15">15</option>
                                    <option value="16">16</option>
                                    <option value="17">17</option>
                                    <option value="18">18</option>
                                    <option value="19">19</option>
                                    <option value="20">20</option>
                                    <option value="21">21</option>
                                    <option value="27">27</option>
                                    <option value="28">28</option>
                                    <option value="29">29</option>
                                    <option value="30">30</option>
                                    <option value="31">31</option>
                                    <option value="32">32</option>
                                </select>
                            </div>
                            <div class="col-3">
                                <select class="form-control" id="phase2DiffieHellman3" name="phase2DiffieHellman3">
                                    <option value="none">Ninguno</option>
                                    <option value="2">2</option>
                                    <option value="5">5</option>
                                    <option value="14">14</option>
                                    <option value="15">15</option>
                                    <option value="16">16</option>
                                    <option value="17">17</option>
                                    <option value="18">18</option>
                                    <option value="19">19</option>
                                    <option value="20">20</option>
                                    <option value="21">21</option>
                                    <option value="27">27</option>
                                    <option value="28">28</option>
                                    <option value="29">29</option>
                                    <option value="30">30</option>
                                    <option value="31">31</option>
                                    <option value="32">32</option>
                                </select>
                            </div>					
                        </div>	
                    </div>						
                    <div class="mb-1">	
                        <div class="row">
                            <div class="col-6">
                                <div class="row">		
                                    <div class="col-6">
                                        <label class="pt-2">Keepalive Frequency</label>
                                    </div>	
                                    <div class="col-6">
                                        <input type="number" class="form-control" id="phase2KeyLifetime" name="phase2KeyLifetime" min="120" max="172800" value="43200" required>
                                    </div>									
                                </div>			
                            </div>			
                            <div class="col-6">
                                <div class="row">
                                    <div class="col-6">
                                        <input type="randomKey" class="form-control subnet" id="randomKey" aria-describedby="nameHelp" disabled >									</div>
                                    <div class="col-6">
                                        <button type="button" id="randomize" data-message="randomize" class="btn btn-primary" disabled>Generar Clave</button>
                                    </div>
                                </div>
                            </div>	
                        </div>
                    </div>	
                </div>
            </div>
        </form>
    </div>
</body>
<script>
    $(document).ready(function () {

        var numSubnets = 1;
        var currentSubnet = 0;

        $('#addSubnets_0').on('click', addSubnets);

        function addButton (id, button, text) {
            
            var divId = button + 'Button_' + id;
            var buttonId = button + 'Subnets_' + id;

            jQuery('<a>', {
                href: "#",
                id: buttonId,
                class: 'btn btn-primary',
                tabindex: '-1',
                role: 'button',
                ariaDisabled: 'true',
                text: text

            }).appendTo("#" + divId);           
            
        }
      
        function removeSubnets(){
            numSubnets --;
            currentSubnet --;

            $('#subnets_' + numSubnets).remove()
            

            addButton(currentSubnet,"remove", "-");
            addButton(currentSubnet, "add", "+");

            $("#removeSubnets_" + currentSubnet).on('click', removeSubnets);
            $("#addSubnets_" + currentSubnet).on('click', addSubnets);
                       
            
            alert("current: " + currentSubnet + "/n num: " + numSubnets);                                                                

        }

        function addSubnets(){

            var childId = "subnets_" + numSubnets;    

            //alert(currentSubnet);
            
            jQuery('<div>', {
                id: `${childId}`,
                class: 'row'

            }).appendTo('#subnets');

            $('#' + childId).append(
                            `<div class="col-3 mt-2">
                                <labelclass="pt-2"></label>
                            </div>								
                            <div class="col-3 pe-0">
                                <input type="localSubnet" class="form-control subnet"  onblur="checkSubnet(this)" id="localSubnet_${numSubnets}" aria-describedby="nameHelp" placeholder="Local Subnet" required>
                            </div>
                            <div class="col-1 ps-0">
                                <select class="form-control" name="localMask" id="localMask_${numSubnets}" disabled>							
                                </select>
                            </div>								
                            <div class="col-3 pe-0">
                                <input type="remoteSubnet" class="form-control subnet" onblur="checkSubnet(this)"  id="remoteSubnet_${numSubnets}" aria-describedby="nameHelp" placeholder="Remote Subnet" required>
                            </div>
                            <div class="col-1 ps-0">
                                <select class="form-control" name="remoteMask" id="remoteMask_${numSubnets}" disabled>
                                </select>
                            </div>
                            <div class="col-1">
                                <div class="row">
                                    <div class="col-6" id="removeButton_${numSubnets}">
                                        <a href="#" class="btn btn-primary" tabindex="-1" role="button" aria-disabled="true" id="removeSubnets_${numSubnets}">-</a>
                                    </div> 
                                    <div class="col-6" id="addButton_${numSubnets}">
                                        <a href="#" class="btn btn-primary" tabindex="-1" role="button" aria-disabled="true" id="addSubnets_${numSubnets}">+</a>
                                    </div>                                    
                                </div>                                
                            </div>`);	

            $('#removeSubnets_' + numSubnets).on('click', removeSubnets);
            //$('#addSubnets_' + currentSubnet).attr('style','display:none');
           // $('#removeSubnets_' + currentSubnet).attr('style' , 'display:none');

            $('#addSubnets_' + currentSubnet).remove();
            $('#removeSubnets_' + currentSubnet).remove();

            if(numSubnets <= 2){
                $('#addSubnets_' + numSubnets).on('click', addSubnets);          
                
            } else {
                $('#addSubnets_' + numSubnets).on('click', function() {alert("No se permiten más de 4 Phase 2")});
            }
                numSubnets ++;
                currentSubnet ++;
            alert("current: " + currentSubnet + "\n num: " + numSubnets);
        }
    });

</script>


</html>